<Page x:Class="Project_Stroymagazin.Pages.StockPage"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Остатки" Background="White" FontFamily="Segoe UI">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#F5F5F5" Padding="15" CornerRadius="4" Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal">
                <StackPanel Margin="0,0,20,0">
                    <TextBlock Text="Выберите склад:" Foreground="#666" FontSize="12" Margin="0,0,0,5"/>
                    <ComboBox x:Name="WarehouseCombo" Width="200" Padding="6" 
                              DisplayMemberPath="Name" SelectedValuePath="Id"
                              SelectionChanged="WarehouseCombo_SelectionChanged"/>
                </StackPanel>

                <StackPanel VerticalAlignment="Bottom">
                    <TextBlock Text="Поиск по названию/SKU:" Foreground="#666" FontSize="12" Margin="0,0,0,5"/>
                    <TextBox x:Name="SearchBox" Width="250" Padding="5" TextChanged="SearchBox_TextChanged"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <DataGrid x:Name="StockGrid" Grid.Row="1" AutoGenerateColumns="False" 
                  IsReadOnly="True" GridLinesVisibility="Horizontal" HeadersVisibility="Column"
                  RowHeight="35" ColumnHeaderHeight="40" BorderBrush="#E0E0E0">

            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="White"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="Padding" Value="10,0"/>
                    <Setter Property="BorderThickness" Value="0,0,0,2"/>
                    <Setter Property="BorderBrush" Value="#1A237E"/>
                </Style>
            </DataGrid.ColumnHeaderStyle>

            <DataGrid.Columns>
                <DataGridTextColumn Header="Артикул" Binding="{Binding Product.SKU}" Width="100"/>
                <DataGridTextColumn Header="Наименование" Binding="{Binding Product.Name}" Width="*"/>
                <DataGridTextColumn Header="Категория" Binding="{Binding Product.Category.Name}" Width="150"/>

                <DataGridTextColumn Header="Склад" Binding="{Binding Warehouse.Name}" Width="150"/>

                <DataGridTextColumn Header="Количество" Binding="{Binding Quantity, StringFormat=N2}" Width="100" FontWeight="Bold">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="#2E7D32"/>
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Ед. изм." Binding="{Binding Product.UnitOfMeasure}" Width="80"/>
            </DataGrid.Columns>
        </DataGrid>

        <TextBlock x:Name="TotalStatsText" Grid.Row="2" Text="Всего позиций: 0" 
                   HorizontalAlignment="Right" Margin="0,10,0,0" Foreground="#666"/>
    </Grid>
</Page>
