<Page x:Class="Project_Stroymagazin.Pages.InventoryHistoryPage"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="История операций" Background="White" FontFamily="Segoe UI">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#ECEFF1" CornerRadius="5" Padding="15" Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="Фильтры операций" FontWeight="SemiBold" Margin="0,0,0,10"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                        <TextBlock Text="Тип операции:"/>
                        <ComboBox x:Name="TypeCombo" SelectionChanged="ApplyFilters_SelectionChanged"/>
                    </StackPanel>
                    <StackPanel Grid.Column="1" Margin="0,0,10,0">
                        <TextBlock Text="Склад:"/>
                        <ComboBox x:Name="WarehouseCombo" DisplayMemberPath="Name" SelectionChanged="ApplyFilters_SelectionChanged"/>
                    </StackPanel>
                    <StackPanel Grid.Column="2" Margin="0,0,10,0">
                        <TextBlock Text="Пользователь:"/>
                        <ComboBox x:Name="UserCombo" DisplayMemberPath="FullName" SelectionChanged="ApplyFilters_SelectionChanged"/>
                    </StackPanel>
                    <Button Grid.Column="3" Content="Сбросить" Click="ResetFilters_Click" VerticalAlignment="Bottom" Padding="15,5"/>
                </Grid>
            </StackPanel>
        </Border>

        <DataGrid x:Name="HistoryGrid" Grid.Row="1" AutoGenerateColumns="False" 
                  CanUserAddRows="False" IsReadOnly="True" HeadersVisibility="Column" 
                  BorderBrush="#E0E0E0">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                <DataGridTextColumn Header="Дата" Binding="{Binding Date, StringFormat=dd.MM.yyyy HH:mm}" Width="150"/>
                <DataGridTextColumn Header="Тип" Binding="{Binding Type}" Width="120" FontWeight="SemiBold"/>
                <DataGridTextColumn Header="Склад" Binding="{Binding Warehouse.Name}" Width="*"/>
                <DataGridTextColumn Header="Оператор" Binding="{Binding User.FullName}" Width="200"/>
                <DataGridTemplateColumn Width="100">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Детали" Click="ShowDetails_Click" Tag="{Binding .}" Padding="10,5" Background="#E3F2FD" BorderThickness="0" Foreground="#1565C0"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Page>